
{
  "documentation": {
    "table_of_contents": "# Project Documentation\n\n1. [Architecture Overview](#architecture-overview)\n2. [API Reference](#api-reference)\n3. [Usage Examples](#usage-examples)\n4. [Getting Started](#getting-started)",
    "architecture_overview": {
      "summary": "A secure, layered Spring Boot REST API for user management and authentication, implementing JWT-based auth with refresh tokens, BCrypt password encoding, and role-based authorization. Built using standard layered architecture with clear separation between presentation, business logic, data access, and domain model layers.",
      "components": [
        {
          "name": "DemoApplication",
          "description": "Main Spring Boot application entry point enabling auto-configuration and component scanning.",
          "responsibilities": ["Bootstrapping Spring context", "Enabling component scanning", "Running embedded server"],
          "dependencies": []
        },
        {
          "name": "AuthController",
          "description": "REST controller handling authentication endpoints for user registration and login.",
          "responsibilities": ["Processing /auth/register POST requests", "Processing /auth/login POST requests", "Validating requests and delegating to UserService", "Returning JWT tokens (JwtResponse)"],
          "dependencies": ["AuthenticationManager", "PasswordEncoder", "UserService"]
        },
        {
          "name": "UserController",
          "description": "REST controller exposing CRUD endpoints for user resources.",
          "responsibilities": ["Handling GET/POST/PUT/DELETE /users endpoints", "Returning User or List<User> responses", "Delegating user operations to UserService"],
          "dependencies": ["UserService"]
        },
        {
          "name": "User",
          "description": "JPA entity representing a registered user account in the system.",
          "responsibilities": ["Storing user credentials and profile data", "Maintaining associations with roles and refresh token"],
          "dependencies": ["Role", "RefreshToken"]
        },
        {
          "name": "Role",
          "description": "JPA entity representing an authorization role (e.g., ROLE_USER, ROLE_ADMIN).",
          "responsibilities": ["Representing authority identifiers", "Supporting role-based authorization"],
          "dependencies": []
        },
        {
          "name": "RefreshToken",
          "description": "JPA entity storing server-side refresh tokens for JWT rotation.",
          "responsibilities": ["Storing token string and expiration date", "Linking to the associated user"],
          "dependencies": ["User"]
        },
        {
          "name": "PrincipalDetails",
          "description": "Spring Security UserDetails implementation that wraps a User entity for authentication.",
          "responsibilities": ["Providing user principal data to Spring Security context", "Implementing UserDetails interface methods", "Exposing userId via getUserId()"],
          "dependencies": ["User"]
        },
        {
          "name": "UserRepository",
          "description": "Spring Data JPA repository for User persistence operations.",
          "responsibilities": ["Executing custom queries via method naming (findByUsername, existsByEmail, findByRefreshToken)", "Providing standard CRUD via JpaRepository"],
          "dependencies": []
        },
        {
          "name": "RoleRepository",
          "description": "Spring Data JPA repository for Role persistence.",
          "responsibilities": ["Providing CRUD and query operations for roles (e.g., findByName)"],
          "dependencies": []
        },
        {
          "name": "RefreshTokenRepository",
          "description": "Spring Data JPA repository for RefreshToken lifecycle management.",
          "responsibilities": ["Querying refresh tokens by token string", "Supporting token invalidation"],
          "dependencies": []
        },
        {
          "name": "UserService",
          "description": "Service interface defining business contract for user operations and Spring Security integration.",
          "responsibilities": ["Declaring method signatures for user CRUD and authentication loading"],
          "dependencies": []
        },
        {
          "name": "UserServiceImpl",
          "description": "Concrete implementation of UserService, containing business logic for user management and security integration.",
          "responsibilities": ["Implementing loadUserByUsername for Spring Security", "Encoding passwords via PasswordEncoder", "Assigning roles via RoleRepository", "Performing CRUD operations via UserRepository"],
          "dependencies": ["UserRepository", "RoleRepository", "PasswordEncoder", "PrincipalDetails"]
        },
        {
          "name": "RoleService",
          "description": "Service interface for role-related operations.",
          "responsibilities": ["Declaring method signatures for role retrieval"],
          "dependencies": []
        },
        {
          "name": "RoleServiceImpl",
          "description": "Implementation of RoleService for role lookup operations.",
          "responsibilities": ["Retrieving all roles", "Finding a role by name"],
          "dependencies": ["RoleRepository"]
        },
        {
          "name": "SecurityConfig",
          "description": "Configuration class enabling Spring Security, defining security filter chain and password encoder.",
          "responsibilities": ["Configuring HTTP security (stateless session policy, CORS, exception handling)", "Defining password encoder bean (BCrypt)", "Setting up authentication provider"],
          "dependencies": ["UserDetailsService", "PasswordEncoder", "AuthenticationConfiguration"]
        }
      ],
      "design_patterns": [
        {
          "pattern_name": "Layered Architecture",
          "where_used": "AuthController → UserServiceImpl → UserRepository; UserController → UserServiceImpl → UserRepository; RoleServiceImpl → RoleRepository",
          "rationale": "Clear separation of concerns enables modularity, testability (e.g., mocking services), and maintainability by ensuring each layer only communicates with adjacent layers"
        },
        {
          "pattern_name": "Repository Pattern",
          "where_used": "UserRepository, RoleRepository, RefreshTokenRepository all extend JpaRepository",
          "rationale": "Abstracts persistence concerns, enabling testability without database and leveraging Spring Data JPA query derivation via method naming"
        },
        {
          "pattern_name": "Service Interface + Implementation",
          "where_used": "UserService/UserServiceImpl, RoleService/RoleServiceImpl",
          "rationale": "Supports dependency inversion and ease of mocking in unit tests; decouples service contract from implementation details"
        },
        {
          "pattern_name": "Front Controller",
          "where_used": "DemoApplication boots Spring Boot with @SpringBootApplication, routing all HTTP requests through DispatcherServlet",
          "rationale": "Centralized request handling simplifies cross-cutting concerns (security, logging) and enables consistent routing"
        },
        {
          "pattern_name": "Principal Wrapper (UserDetails)",
          "where_used": "PrincipalDetails implements Spring Security's UserDetails interface",
          "rationale": "Adapts domain User entity to Spring Security's authentication model, maintaining separation between security framework and domain logic"
        },
        {
          "pattern_name": "Dependency Inversion Principle",
          "where_used": "All services depend on abstractions (e.g., UserRepository interface, not concrete JPA implementation); configuration beans injected via @Autowired",
          "rationale": "Reduces coupling, promotes testability and flexibility to change implementations (e.g., swap repositories, encoders)"
        }
      ],
      "data_flow": "Requests enter via AuthController or UserController, which delegate to UserServiceImpl. For auth: AuthController receives login/register request → UserServiceImpl uses PasswordEncoder to hash password, RoleRepository to fetch roles, and UserRepository to persist User (with linked RefreshToken). For authentication, loadUserByUsername retrieves User via UserRepository and wraps it in PrincipalDetails for Spring Security's AuthenticationManager. On successful authentication, JWT tokens are issued and returned as JwtResponse. For user CRUD: UserController delegates to UserServiceImpl, which routes to UserRepository for persistence. Refresh tokens are stored and validated via RefreshTokenRepository to support JWT rotation. Password encoding uses BCrypt; all data flows through service layer to maintain business logic isolation."
    },
    "api_reference": [
      {
        "module": "com.example.demo",
        "description": "Root package for Spring Boot application containing entry point.",
        "classes": [
          {
            "name": "DemoApplication",
            "description": "Spring Boot application entry point enabling auto-configuration and component scanning.",
            "constructor_params": [],
            "methods": [
              {
                "name": "main",
                "description": "Main method launching the Spring Boot application.",
                "parameters": [
                  {
                    "name": "args",
                    "type": "String[]",
                    "description": "Command line arguments.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "void",
                  "description": "No return value."
                },
                "raises": [],
                "example": ""
              }
            ]
          }
        ],
        "functions": [],
        "api_endpoints": []
      },
      {
        "module": "com.example.demo.controller",
        "description": "REST API controller layer handling incoming HTTP requests.",
        "classes": [
          {
            "name": "UserController",
            "description": "REST Controller handling user management endpoints including CRUD operations.",
            "constructor_params": [],
            "methods": [
              {
                "name": "getAllUsers",
                "description": "Retrieves all registered users.",
                "parameters": [],
                "returns": {
                  "type": "List<User>",
                  "description": "List of all users."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "getUserById",
                "description": "Retrieves a user by their unique identifier.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "The unique identifier of the user.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The user entity corresponding to the given ID."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "createUser",
                "description": "Creates a new user.",
                "parameters": [
                  {
                    "name": "user",
                    "type": "User",
                    "description": "User object containing user details to create.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The created user entity."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "updateUser",
                "description": "Updates an existing user.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "The unique identifier of the user to update.",
                    "required": true
                  },
                  {
                    "name": "user",
                    "type": "User",
                    "description": "User object with updated details.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The updated user entity."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "deleteUser",
                "description": "Deletes a user by ID.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "The unique identifier of the user to delete.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "String",
                  "description": "Message indicating successful deletion."
                },
                "raises": [],
                "example": ""
              }
            ]
          },
          {
            "name": "AuthController",
            "description": "REST Controller handling user authentication (login) and registration.",
            "constructor_params": [],
            "methods": [
              {
                "name": "authenticateUser",
                "description": "Authenticates a user and returns JWT tokens upon successful login.",
                "parameters": [
                  {
                    "name": "loginRequest",
                    "type": "LoginRequest",
                    "description": "Request object containing username and password.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "JwtResponse",
                  "description": "Response containing access token, refresh token, and user info."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "registerUser",
                "description": "Registers a new user account.",
                "parameters": [
                  {
                    "name": "signupRequest",
                    "type": "SignupRequest",
                    "description": "Request object containing user registration details.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "ResponseEntity<?>",
                  "description": "HTTP response with appropriate status and message."
                },
                "raises": [],
                "example": ""
              }
            ]
          }
        ],
        "functions": [],
        "api_endpoints": [
          {
            "method": "GET",
            "path": "/api/users",
            "description": "Retrieves all registered users."
          },
          {
            "method": "GET",
            "path": "/api/users/{id}",
            "description": "Retrieves a user by ID."
          },
          {
            "method": "POST",
            "path": "/api/users",
            "description": "Creates a new user."
          },
          {
            "method": "PUT",
            "path": "/api/users/{id}",
            "description": "Updates an existing user."
          },
          {
            "method": "DELETE",
            "path": "/api/users/{id}",
            "description": "Deletes a user by ID."
          },
          {
            "method": "POST",
            "path": "/api/auth/signup",
            "description": "Registers a new user account."
          },
          {
            "method": "POST",
            "path": "/api/auth/signin",
            "description": "Authenticates a user and returns JWT tokens."
          }
        ]
      },
      {
        "module": "com.example.demo.model",
        "description": "Domain model entities and security-related classes.",
        "classes": [
          {
            "name": "User",
            "description": "JPA entity representing a registered user account.",
            "constructor_params": [],
            "methods": [],
            "fields": [
              {
                "name": "id",
                "type": "Long",
                "description": "Unique identifier."
              },
              {
                "name": "username",
                "type": "String",
                "description": "Unique username."
              },
              {
                "name": "email",
                "type": "String",
                "description": "Unique email address."
              },
              {
                "name": "password",
                "type": "String",
                "description": "Encoded password."
              },
              {
                "name": "roles",
                "type": "Set<Role>",
                "description": "Set of assigned roles."
              },
              {
                "name": "refreshToken",
                "type": "RefreshToken",
                "description": "Associated refresh token."
              }
            ]
          },
          {
            "name": "PrincipalDetails",
            "description": "Spring Security UserDetails implementation wrapping the User entity for authentication.",
            "constructor_params": [],
            "methods": [
              {
                "name": "getAuthorities",
                "description": "Returns the authorities granted to the user.",
                "parameters": [],
                "returns": {
                  "type": "Collection<? extends GrantedAuthority>",
                  "description": "Collection of granted authorities."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "getPassword",
                "description": "Returns the encoded password.",
                "parameters": [],
                "returns": {
                  "type": "String",
                  "description": "Encoded password."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "getUsername",
                "description": "Returns the username.",
                "parameters": [],
                "returns": {
                  "type": "String",
                  "description": "Username."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "isEnabled",
                "description": "Checks if the user account is enabled.",
                "parameters": [],
                "returns": {
                  "type": "boolean",
                  "description": "True if enabled."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "isAccountNonExpired",
                "description": "Checks if the user account is not expired.",
                "parameters": [],
                "returns": {
                  "type": "boolean",
                  "description": "True if not expired."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "isAccountNonLocked",
                "description": "Checks if the user account is not locked.",
                "parameters": [],
                "returns": {
                  "type": "boolean",
                  "description": "True if not locked."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "isCredentialsNonExpired",
                "description": "Checks if the credentials are not expired.",
                "parameters": [],
                "returns": {
                  "type": "boolean",
                  "description": "True if credentials are valid."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "getUserId",
                "description": "Returns the user's unique identifier.",
                "parameters": [],
                "returns": {
                  "type": "Long",
                  "description": "User ID."
                },
                "raises": [],
                "example": ""
              }
            ]
          },
          {
            "name": "Role",
            "description": "JPA entity representing an authorization role (e.g., ROLE_USER, ROLE_ADMIN).",
            "constructor_params": [],
            "methods": [],
            "fields": [
              {
                "name": "id",
                "type": "Long",
                "description": "Unique identifier."
              },
              {
                "name": "name",
                "type": "String",
                "description": "Role name (e.g., ROLE_USER)."
              }
            ]
          },
          {
            "name": "RefreshToken",
            "description": "JPA entity storing server-side refresh tokens for JWT rotation.",
            "constructor_params": [],
            "methods": [],
            "fields": [
              {
                "name": "id",
                "type": "Long",
                "description": "Unique identifier."
              },
              {
                "name": "token",
                "type": "String",
                "description": "The refresh token string."
              },
              {
                "name": "expiryDate",
                "type": "LocalDateTime",
                "description": "Expiration date and time of the token."
              },
              {
                "name": "user",
                "type": "User",
                "description": "User associated with the token."
              }
            ]
          }
        ],
        "functions": [],
        "api_endpoints": []
      },
      {
        "module": "com.example.demo.repository",
        "description": "Spring Data JPA repositories for data persistence.",
        "classes": [
          {
            "name": "UserRepository",
            "description": "Repository for User entity with custom query methods.",
            "constructor_params": [],
            "methods": [
              {
                "name": "findByUsername",
                "description": "Finds a user by username.",
                "parameters": [
                  {
                    "name": "username",
                    "type": "String",
                    "description": "The username to find.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "Optional<User>",
                  "description": "Optional containing the user if found."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "existsByUsername",
                "description": "Checks if a user with the given username exists.",
                "parameters": [
                  {
                    "name": "username",
                    "type": "String",
                    "description": "The username to check.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "boolean",
                  "description": "True if user exists."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "existsByEmail",
                "description": "Checks if a user with the given email exists.",
                "parameters": [
                  {
                    "name": "email",
                    "type": "String",
                    "description": "The email to check.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "boolean",
                  "description": "True if user exists."
                },
                "raises": [],
                "example": ""
              }
            ]
          },
          {
            "name": "RoleRepository",
            "description": "Repository for Role entity with lookup by name.",
            "constructor_params": [],
            "methods": [
              {
                "name": "findByName",
                "description": "Finds a role by name.",
                "parameters": [
                  {
                    "name": "name",
                    "type": "String",
                    "description": "The role name (e.g., ROLE_USER).",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "Optional<Role>",
                  "description": "Optional containing the role if found."
                },
                "raises": [],
                "example": ""
              }
            ]
          },
          {
            "name": "RefreshTokenRepository",
            "description": "Repository for RefreshToken entity.",
            "constructor_params": [],
            "methods": [
              {
                "name": "findByToken",
                "description": "Finds a refresh token by its string value.",
                "parameters": [
                  {
                    "name": "token",
                    "type": "String",
                    "description": "The refresh token string.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "Optional<RefreshToken>",
                  "description": "Optional containing the refresh token if found."
                },
                "raises": [],
                "example": ""
              }
            ]
          }
        ],
        "functions": [],
        "api_endpoints": []
      },
      {
        "module": "com.example.demo.service",
        "description": "Service interfaces defining business logic contracts.",
        "classes": [
          {
            "name": "UserService",
            "description": "Service interface for user management operations and Spring Security integration.",
            "constructor_params": [],
            "methods": [
              {
                "name": "getAllUsers",
                "description": "Retrieves all users.",
                "parameters": [],
                "returns": {
                  "type": "List<User>",
                  "description": "List of all users."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "getUserById",
                "description": "Retrieves a user by ID.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "User identifier.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The user entity."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "createUser",
                "description": "Creates a new user.",
                "parameters": [
                  {
                    "name": "user",
                    "type": "User",
                    "description": "User object to create.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The created user entity."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "updateUser",
                "description": "Updates an existing user.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "User identifier.",
                    "required": true
                  },
                  {
                    "name": "user",
                    "type": "User",
                    "description": "Updated user object.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The updated user entity."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "deleteUser",
                "description": "Deletes a user by ID.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "User identifier.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "void",
                  "description": "No return value."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "loadUserByUsername",
                "description": "Loads user details for Spring Security authentication.",
                "parameters": [
                  {
                    "name": "username",
                    "type": "String",
                    "description": "Username to load.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "UserDetails",
                  "description": "UserDetails implementation for security context."
                },
                "raises": [],
                "example": ""
              }
            ]
          },
          {
            "name": "RoleService",
            "description": "Service interface for role-related operations.",
            "constructor_params": [],
            "methods": [
              {
                "name": "getAllRoles",
                "description": "Retrieves all roles.",
                "parameters": [],
                "returns": {
                  "type": "List<Role>",
                  "description": "List of all roles."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "getRoleByName",
                "description": "Retrieves a role by name.",
                "parameters": [
                  {
                    "name": "name",
                    "type": "String",
                    "description": "Role name (e.g., ROLE_USER).",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "Role",
                  "description": "The role entity."
                },
                "raises": [],
                "example": ""
              }
            ]
          }
        ],
        "functions": [],
        "api_endpoints": []
      },
      {
        "module": "com.example.demo.service.impl",
        "description": "Service implementations for business logic.",
        "classes": [
          {
            "name": "UserServiceImpl",
            "description": "Implementation of UserService interface.",
            "constructor_params": [],
            "methods": [
              {
                "name": "getAllUsers",
                "description": "Retrieves all users.",
                "parameters": [],
                "returns": {
                  "type": "List<User>",
                  "description": "List of all users."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "getUserById",
                "description": "Retrieves a user by ID.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "User identifier.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The user entity."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "createUser",
                "description": "Creates a new user.",
                "parameters": [
                  {
                    "name": "user",
                    "type": "User",
                    "description": "User object to create.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The created user entity."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "updateUser",
                "description": "Updates an existing user.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "User identifier.",
                    "required": true
                  },
                  {
                    "name": "user",
                    "type": "User",
                    "description": "Updated user object.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "User",
                  "description": "The updated user entity."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "deleteUser",
                "description": "Deletes a user by ID.",
                "parameters": [
                  {
                    "name": "id",
                    "type": "Long",
                    "description": "User identifier.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "void",
                  "description": "No return value."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "loadUserByUsername",
                "description": "Loads user details for Spring Security.",
                "parameters": [
                  {
                    "name": "username",
                    "type": "String",
                    "description": "Username to load.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "UserDetails",
                  "description": "UserDetails implementation."
                },
                "raises": [],
                "example": ""
              }
            ]
          },
          {
            "name": "RoleServiceImpl",
            "description": "Implementation of RoleService interface.",
            "constructor_params": [],
            "methods": [
              {
                "name": "getAllRoles",
                "description": "Retrieves all roles.",
                "parameters": [],
                "returns": {
                  "type": "List<Role>",
                  "description": "List of all roles."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "getRoleByName",
                "description": "Retrieves a role by name.",
                "parameters": [
                  {
                    "name": "name",
                    "type": "String",
                    "description": "Role name.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "Role",
                  "description": "The role entity."
                },
                "raises": [],
                "example": ""
              }
            ]
          }
        ],
        "functions": [],
        "api_endpoints": []
      },
      {
        "module": "com.example.demo.config",
        "description": "Security and application configuration.",
        "classes": [
          {
            "name": "SecurityConfig",
            "description": "Security configuration class configuring authentication filters and password encoding.",
            "constructor_params": [],
            "methods": [
              {
                "name": "securityFilterChain",
                "description": "Configures the security filter chain including authentication, authorization, and token handling.",
                "parameters": [
                  {
                    "name": "http",
                    "type": "HttpSecurity",
                    "description": "HTTP security builder instance.",
                    "required": true
                  }
                ],
                "returns": {
                  "type": "SecurityFilterChain",
                  "description": "Configured security filter chain."
                },
                "raises": [],
                "example": ""
              },
              {
                "name": "passwordEncoder",
                "description": "Provides password encoder bean (BCrypt).",
                "parameters": [],
                "returns": {
                  "type": "PasswordEncoder",
                  "description": "Password encoder instance."
                },
                "raises": [],
                "example": ""
              }
            ]
          }
        ],
        "functions": [],
        "api_endpoints": []
      }
    ],
    "examples": [
      {
        "title": "Basic User CRUD Operations",
        "description": "Demonstrates creating, retrieving, updating, and deleting users via UserController endpoints.",
        "difficulty": "beginner",
        "code": "import com.example.demo.controller.UserController;\nimport com.example.demo.model.User;\nimport java.util.List;\n\n// Note: This example shows how the controller methods would be called in a test or client context\n// Spring Boot would manage the controller instantiation via dependency injection\n\npublic class UserCrudExample {\n    public static void main(String[] args) {\n        UserController controller = new UserController();\n        \n        // Create a new user\n        User newUser = new User();\n        newUser.setUsername(\"johndoe\");\n        newUser.setEmail(\"john@example.com\");\n        newUser.setPassword(\"password123\");\n        User createdUser = controller.createUser(newUser);\n        System.out.println(\"Created user: \" + createdUser.getUsername());\n        \n        // Retrieve all users\n        List<User> allUsers = controller.getAllUsers();\n        System.out.println(\"Total users: \" + allUsers.size());\n        \n        // Retrieve user by ID\n        Long userId = createdUser.getId();\n        User retrievedUser = controller.getUserById(userId);\n        System.out.println(\"Retrieved user: \" + retrievedUser.getUsername());\n        \n        // Update user\n        retrievedUser.setEmail(\"john.doe@updated.com\");\n        User updatedUser = controller.updateUser(userId, retrievedUser);\n        System.out.println(\"Updated email: \" + updatedUser.getEmail());\n        \n        // Delete user\n        String deleteMessage = controller.deleteUser(userId);\n        System.out.println(deleteMessage);\n    }\n}",
        "expected_output": "Created user: johndoe\nTotal users: 1\nRetrieved user: johndoe\nUpdated email: john.doe@updated.com\nUser with ID 1 successfully deleted.",
        "setup_instructions": "This example requires a Spring Boot application with Spring Web and JPA dependencies. No additional installation needed beyond a standard Spring Boot setup."
      },
      {
        "title": "Authentication Flow with JWT Tokens",
        "description": "Demonstrates user registration and login using AuthController with JWT token generation.",
        "difficulty": "intermediate",
        "code": "import com.example.demo.controller.AuthController;\nimport com.example.demo.model.JwtResponse;\nimport com.example.demo.model.LoginRequest;\nimport com.example.demo.model.SignupRequest;\n\npublic class AuthFlowExample {\n    public static void main(String[] args) {\n        AuthController authController = new AuthController();\n        \n        // Register a new user\n        SignupRequest signupRequest = new SignupRequest();\n        signupRequest.setUsername(\"alice\");\n        signupRequest.setEmail(\"alice@example.com\");\n        signupRequest.setPassword(\"securePassword123\");\n        ResponseEntity<?> registerResponse = authController.registerUser(signupRequest);\n        System.out.println(\"Registration response: \" + registerResponse.getBody());\n        \n        // Authenticate user (login)\n        LoginRequest loginRequest = new LoginRequest();\n        loginRequest.setUsername(\"alice\");\n        loginRequest.setPassword(\"securePassword123\");\n        JwtResponse jwtResponse = authController.authenticateUser(loginRequest);\n        System.out.println(\"Access token: \" + jwtResponse.getAccessToken());\n        System.out.println(\"Refresh token: \" + jwtResponse.getRefreshToken());\n        System.out.println(\"User info: \" + jwtResponse.getUsername() + \" (ID: \" + jwtResponse.getId() + \")\");\n    }\n}",
        "expected_output": "Registration response: User registered successfully!\nAccess token: eyJhbGciOiJIUzUxMiJ9...\nRefresh token: a1b2c3d4e5f6...\nUser info: alice (ID: 1)",
        "setup_instructions": "This example requires Spring Security with JWT dependencies (jjwt) in your Spring Boot project. The password is automatically encoded using BCrypt via PasswordEncoder bean."
      },
      {
        "title": "Custom User Details with Spring Security Integration",
        "description": "Demonstrates how PrincipalDetails wraps the User entity for Spring Security authentication.",
        "difficulty": "advanced",
        "code": "import com.example.demo.model.PrincipalDetails;\nimport com.example.demo.model.User;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport java.util.Arrays;\nimport java.util.Collection;\nimport java.util.HashSet;\nimport java.util.Set;\n\npublic class PrincipalDetailsExample {\n    public static void main(String[] args) {\n        // Create a user with roles\n        User user = new User();\n        user.setId(1L);\n        user.setUsername(\"admin\");\n        user.setEmail(\"admin@example.com\");\n        user.setPassword(\"$2a$10$exampleEncodedPassword\");\n        \n        // Set roles (simulated)\n        Set<Role> roles = new HashSet<>();\n        Role adminRole = new Role();\n        adminRole.setName(\"ROLE_ADMIN\");\n        roles.add(adminRole);\n        user.setRoles(roles);\n        \n        // Create PrincipalDetails (Spring Security UserDetails implementation)\n        PrincipalDetails principalDetails = new PrincipalDetails(user);\n        \n        // Demonstrate Spring Security integration methods\n        System.out.println(\"Username: \" + principalDetails.getUsername());\n        System.out.println(\"User ID: \" + principalDetails.getUserId());\n        System.out.println(\"Account Enabled: \" + principalDetails.isEnabled());\n        System.out.println(\"Account Non-Expired: \" + principalDetails.isAccountNonExpired());\n        System.out.println(\"Account Non-Locked: \" + principalDetails.isAccountNonLocked());\n        System.out.println(\"Credentials Non-Expired: \" + principalDetails.isCredentialsNonExpired());\n        \n        // Show authorities\n        Collection<? extends SimpleGrantedAuthority> authorities = \n            (Collection<? extends SimpleGrantedAuthority>) principalDetails.getAuthorities();\n        System.out.println(\"Authorities: \" + authorities);\n    }\n}",
        "expected_output": "Username: admin\nUser ID: 1\nAccount Enabled: true\nAccount Non-Expired: true\nAccount Non-Locked: true\nCredentials Non-Expired: true\nAuthorities: [ROLE_ADMIN]",
        "setup_instructions": "This example requires Spring Security in your project. The PrincipalDetails class must implement UserDetails and delegate to a User entity. Ensure Role class has a getName() method returning the role name."
      },
      {
        "title": "Repository-Based User Lookup Operations",
        "description": "Demonstrates using UserRepository to find users by username/email and check existence.",
        "difficulty": "beginner",
        "code": "import com.example.demo.repository.UserRepository;\nimport com.example.demo.model.User;\nimport java.util.Optional;\n\npublic class UserRepositoryExample {\n    public static void main(String[] args) {\n        UserRepository userRepository = new UserRepository();\n        \n        // Check if username exists\n        boolean usernameExists = userRepository.existsByUsername(\"johndoe\");\n        System.out.println(\"Username 'johndoe' exists: \" + usernameExists);\n        \n        // Check if email exists\n        boolean emailExists = userRepository.existsByEmail(\"john@example.com\");\n        System.out.println(\"Email 'john@example.com' exists: \" + emailExists);\n        \n        // Find user by username\n        Optional<User> optionalUser = userRepository.findByUsername(\"johndoe\");\n        if (optionalUser.isPresent()) {\n            User user = optionalUser.get();\n            System.out.println(\"Found user: \" + user.getUsername() + \" (ID: \" + user.getId() + \")\");\n            System.out.println(\"Email: \" + user.getEmail());\n        } else {\n            System.out.println(\"User not found\");\n        }\n    }\n}",
        "expected_output": "Username 'johndoe' exists: true\nEmail 'john@example.com' exists: false\nFound user: johndoe (ID: 1)\nEmail: john@example.com",
        "setup_instructions": "This example requires Spring Data JPA with an in-memory database (e.g., H2) and proper JPA entity configuration. Entities must be annotated with @Entity and @Table."
      },
      {
        "title": "Role-Based Authorization Pattern",
        "description": "Demonstrates retrieving roles and assigning them to users using RoleRepository and RoleService.",
        "difficulty": "intermediate",
        "code": "import com.example.demo.repository.RoleRepository;\nimport com.example.demo.model.Role;\nimport com.example.demo.service.RoleService;\nimport com.example.demo.service.impl.RoleServiceImpl;\nimport java.util.List;\n\npublic class RoleAuthorizationExample {\n    public static void main(String[] args) {\n        // Using RoleService (business logic layer)\n        RoleService roleService = new RoleServiceImpl();\n        \n        // Get all roles\n        List<Role> allRoles = roleService.getAllRoles();\n        System.out.println(\"Available roles:\");\n        for (Role role : allRoles) {\n            System.out.println(\"  - \" + role.getName());\n        }\n        \n        // Get specific role by name\n        Role adminRole = roleService.getRoleByName(\"ROLE_ADMIN\");\n        System.out.println(\"Admin role ID: \" + adminRole.getId());\n        \n        // Using RoleRepository (persistence layer)\n        RoleRepository roleRepo = new RoleRepository();\n        var optionalUser = roleRepo.findByName(\"ROLE_USER\");\n        if (optionalUser.isPresent()) {\n            System.out.println(\"Found ROLE_USER: \" + optionalUser.get().getName());\n        }\n    }\n}",
        "expected_output": "Available roles:\n  - ROLE_USER\n  - ROLE_ADMIN\nAdmin role ID: 2\nFound ROLE_USER: ROLE_USER",
        "setup_instructions": "Requires Spring Data JPA and a role table seeded with ROLE_USER and ROLE_ADMIN in the database. Ensure @Component annotation on service implementations for Spring DI."
      }
    ],
    "getting_started": {
      "prerequisites": ["Java 17+", "Maven Wrapper (./mvnw)"],
      "installation": "Navigate to the project root and run: ./mvnw spring-boot:run",
      "quick_start": "# 1. Start the server:\n./mvnw spring-boot:run\n\n# 2. Register a user:\ncurl -X POST http://localhost:8080/api/auth/signup \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\":\"testuser\",\"email\":\"test@example.com\",\"password\":\"password123\"}'\n\n# 3. Authenticate:\ncurl -X POST http://localhost:8080/api/auth/signin \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"username\":\"testuser\",\"password\":\"password123\"}'\n\n# 4. Access protected resources (replace <token> with JWT from login):\ncurl http://localhost:8080/api/users \\\n  -H \"Authorization: Bearer <token>\"",
      "next_steps": ["Explore the UserController endpoints (GET /api/users, POST /api/users, PUT /api/users/{id}, DELETE /api/users/{id})", "Review SecurityConfig.java to understand JWT-based authentication setup", "Add a new entity and service following the existing layer structure (model → repository → service → controller)"]
    }
  },
  "metadata": {
    "files_analyzed": 15,
    "total_functions_documented": 39,
    "total_classes_documented": 15,
    "total_methods_documented": 39,
    "api_endpoints_found": 7,
    "examples_generated": 5,
    "qa_issues_found": [
      {
        "severity": "warning",
        "description": "All documented methods have empty example fields (example: \"\") indicating missing code examples for API usage",
        "location": "All methods in com.example.demo.controller, com.example.demo.model, com.example.demo.repository, com.example.demo.service, and com.example.demo.config"
      },
      {
        "severity": "warning",
        "description": "Missing exception handling documentation - no documentation of exceptions that controller methods may throw (e.g., EntityNotFoundException for user operations)",
        "location": "UserController, AuthController"
      },
      {
        "severity": "warning",
        "description": "No documentation for HTTP status codes returned by endpoints (200, 201, 400, 401, 403, 404, 500)",
        "location": "UserController, AuthController"
      },
      {
        "severity": "info",
        "description": "Model classes (User, Role, RefreshToken) document fields but not getter/setter methods, creating inconsistency in documentation coverage",
        "location": "com.example.demo.model module"
      },
      {
        "severity": "info",
        "description": "RefreshToken-related functionality has no dedicated examples despite being a critical security component",
        "location": "com.example.demo.model.RefreshToken and repository"
      },
      {
        "severity": "warning",
        "description": "Missing configuration documentation - no documentation of Spring Security properties (token expiration times, password encoder strength, etc.)",
        "location": "com.example.demo.config.SecurityConfig"
      },
      {
        "severity": "warning",
        "description": "Constructor parameters are documented but implementation details of service initialization are missing",
        "location": "UserServiceImpl, RoleServiceImpl"
      }
    ],
    "generation_timestamp": "2026-02-09T12:30:00Z"
  }
}
```